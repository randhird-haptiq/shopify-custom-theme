{% assign current_variant = product.selected_or_first_available_variant %}
{% assign featured_image = current_variant.featured_image | default: product.featured_image %}

<div class="product-template container">
  <!-- Product Images with Swiper Slider -->
  <div class="product-images">
    <div class="swiper-container swiper-container-{{- product.id -}}">
      <div class="swiper-wrapper">
        {% for image in product.images %}
          <div class="swiper-slide">
            <img src="{{ image.src | img_url: 'master' }}" alt="{{ image.alt }}" height="400" width="400">
          </div>
        {% endfor %}
      </div>
      <!-- Swiper Navigation Buttons -->
      <div class="swiper-button-next swiper-button-next-{{- product.id -}}"></div>
      <div class="swiper-button-prev swiper-button-prev-{{- product.id -}}"></div>
    </div>
  </div>

  <!-- Product Description and Add-to-Cart Form -->
  <div class="product-description-container">
    <div class="product-title">
      <h1>{{ product.title }}</h1>
    </div>
    <div class="product-bottom">
      <div class="product-description">
        {{ product.description }}
      </div>
      {% render 'add-to-cart-form' %}
    </div>
  </div>
</div>

<!-- Swiper Initialization Script -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    new Swiper('.swiper-container-{{- product.id -}}', {
      slidesPerView: 1,
      centeredSlides: true,
      spaceBetween: 0,
      loop: true,
      navigation: {
        nextEl: '.swiper-button-next-{{- product.id -}}',
        prevEl: '.swiper-button-prev-{{- product.id -}}',
      },
      breakpoints: {
        600: {
          allowTouchMove: false,
          speed: 0,
        },
      },
    });
  });
</script>
